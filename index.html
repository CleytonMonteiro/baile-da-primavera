<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AABB ARACAJU - 80 ANOS</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f2f5;
            margin: 0;
            padding: 20px;
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
        }

        .legenda {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }

        .legenda-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: bold;
            color: #555;
        }

        .legenda-cor {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .layout-salão {
            display: flex;
            justify-content: center;
            gap: 50px;
            width: 100%;
            max-width: 1400px;
            margin-top: 20px;
        }
        
        .secao-mesas {
            display: flex;
            gap: 10px;
        }

        .coluna-mesas {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        /* Estilo da seção do centro */
        .secao-centro {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: flex-start;
            gap: 10px;
        }
        
        .mesa {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #ccc;
            border-radius: 4px;
            color: #333;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s, background-color 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            background-color: #f9f9f9;
            position: relative; /* Necessário para posicionar o tooltip */
        }
        
        .mesa:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            z-index: 1000; /* Adicionado para trazer a mesa e o tooltip para a frente */
        }

        /* Estilo do tooltip */
        .mesa[data-tooltip]:hover::before {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%; /* Posiciona acima da mesa */
            left: 50%;
            transform: translateX(-50%);
            background-color: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            white-space: nowrap;
            font-size: 0.8em;
            font-weight: normal;
        }

        .livre {
            background-color: #28a745;
            color: white;
        }

        .reservada {
            background-color: #ffc107;
            color: #333;
        }

        .vendida {
            background-color: #dc3545;
            color: white;
        }
        
        #cadastro-form {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            z-index: 1000;
            display: none;
            flex-direction: column;
            gap: 15px;
        }
        
        #cadastro-form.alerta-erro {
            border: 2px solid #dc3545;
        }

        #cadastro-form h2 {
            margin-top: 0;
            color: #333;
        }
        
        #cadastro-form label {
            font-weight: bold;
            color: #555;
        }

        #cadastro-form input, #cadastro-form select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }
        
        #senha-supervisor {
            font-family: monospace;
        }

        .botoes-form {
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }

        .botoes-form button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            color: white;
            transition: background-color 0.2s;
        }
        
        #salvar-btn {
            background-color: #007bff;
        }

        #salvar-btn:hover {
            background-color: #0056b3;
        }

        #cancelar-btn {
            background-color: #6c757d;
        }
        
        #cancelar-btn:hover {
            background-color: #5a6268;
        }

        #mensagem-erro {
            color: #dc3545;
            font-size: 0.9em;
            margin-top: -10px;
            display: none;
        }
    </style>
</head>
<body>

    <h1>BAILE DA PRIMAVERA</h1>

    <div class="legenda">
        <div class="legenda-item">
            <div class="legenda-cor" style="background-color: #28a745;"></div>
            <span>Livre</span>
        </div>
        <div class="legenda-item">
            <div class="legenda-cor" style="background-color: #ffc107;"></div>
            <span>Reservada</span>
        </div>
        <div class="legenda-item">
            <div class="legenda-cor" style="background-color: #dc3545;"></div>
            <span>Vendida</span>
        </div>
    </div>

    <div class="layout-salão">
        
        <div class="secao-mesas" id="secao-esquerda">
            <div class="coluna-mesas" id="col-esq-1"></div>
            <div class="coluna-mesas" id="col-esq-2"></div>
            <div class="coluna-mesas" id="col-esq-3"></div>
            <div class="coluna-mesas" id="col-esq-4"></div>
        </div>

        <div class="secao-centro" id="secao-centro">
            <div class="coluna-mesas" id="col-cen-1"></div>
            <div class="coluna-mesas" id="col-cen-2"></div>
            <div class="coluna-mesas" id="col-cen-3"></div>
            <div class="coluna-mesas" id="col-cen-4"></div>
            <div class="coluna-mesas" id="col-cen-5"></div>
            <div class="coluna-mesas" id="col-cen-6"></div>
	        <div class="coluna-mesas" id="col-cen-7"></div>
        </div>
        
        <div class="secao-mesas" id="secao-direita">
            <div class="coluna-mesas" id="col-dir-1"></div>
            <div class="coluna-mesas" id="col-dir-2"></div>
            <div class="coluna-mesas" id="col-dir-3"></div>
            <div class="coluna-mesas" id="col-dir-4"></div>
            <div class="coluna-mesas" id="col-dir-5"></div>
            <div class="coluna-mesas" id="col-dir-6"></div>
        </div>
    </div>

    <div id="cadastro-form">
        <h2>Cadastro de Mesa</h2>
        <input type="hidden" id="mesa-numero">
        
        <label for="nome-completo">Nome Completo:</label>
        <input type="text" id="nome-completo" placeholder="Digite o nome completo" required>
        
        <label for="status-mesa">Status:</label>
        <select id="status-mesa">
            <option value="livre">Livre</option>
            <option value="reservada">Reservada</option>
            <option value="vendida">Vendida</option>
        </select>
        
        <label for="senha-supervisor">Senha do Supervisor:</label>
        <input type="password" id="senha-supervisor" placeholder="Digite a senha" required>
        <span id="mensagem-erro">Senha incorreta. Por favor, tente novamente.</span>

        <div class="botoes-form">
            <button id="salvar-btn">Salvar</button>
            <button id="cancelar-btn">Cancelar</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const cadastroForm = document.getElementById('cadastro-form');
            const mesaNumeroInput = document.getElementById('mesa-numero');
            const nomeCompletoInput = document.getElementById('nome-completo');
            const statusMesaSelect = document.getElementById('status-mesa');
            const senhaSupervisorInput = document.getElementById('senha-supervisor');
            const salvarBtn = document.getElementById('salvar-btn');
            const cancelarBtn = document.getElementById('cancelar-btn');
            const mensagemErro = document.getElementById('mensagem-erro');
            const senhaCorreta = "100945";
            const localStorageKey = "estadoMesas";

            // Dados brutos das mesas para reproduzir o layout da imagem
            const layoutMesas = {
                'col-esq-1': [101, 100, 99, 98, 97, 96, 95, 94],
                'col-esq-2': [86, 87, 88, 89, 90, 91, 92, 93],
                'col-esq-3': [85, 84, 83, 82, 81, 80, 79, 78], 
                'col-esq-4': [70, 71, 72, 73, 74, 75, 76, 77],
                
                'col-cen-1': [69, 68, 67],
                'col-cen-2': [64, 65, 66],
                'col-cen-3': [63, 62, 61],
                'col-cen-4': [58, 59, 60],
                'col-cen-5': [57, 56, 55],
                'col-cen-6': [52, 53, 54],
                'col-cen-7': [51, 50, 49],

                'col-dir-1': [41, 42, 43, 44, 45, 46, 47, 48],
                'col-dir-2': [40, 39, 38, 37, 36, 35, 34, 33],
                'col-dir-3': [25, 26, 27, 28, 29, 30, 31, 32],
                'col-dir-4': [24, 23, 22, 21, 20, 19, 18, 17],
                'col-dir-5': [9, 10, 11, 12, 13, 14, 15, 16],
                'col-dir-6': [8, 7, 6, 5, 4, 3, 2, 1]
            };
            
            let mesas = {};

            // Função para salvar o estado das mesas no localStorage
            function salvarEstadoMesas() {
                localStorage.setItem(localStorageKey, JSON.stringify(mesas));
            }

            // Função para carregar o estado das mesas do localStorage
            function carregarEstadoMesas() {
                const dadosSalvos = localStorage.getItem(localStorageKey);
                if (dadosSalvos) {
                    mesas = JSON.parse(dadosSalvos);
                } else {
                    // Se não houver dados salvos, inicializa as mesas com status padrão (livre)
                    for (const colId in layoutMesas) {
                        layoutMesas[colId].forEach(mesaNum => {
                            mesas[mesaNum] = { status: 'livre', nome: '' };
                        });
                    }
                }
            }

            // Função para renderizar as mesas na tela
            function renderizarMesas() {
                document.querySelectorAll('.coluna-mesas').forEach(col => col.innerHTML = '');
                
                for (const colId in layoutMesas) {
                    const coluna = document.getElementById(colId);
                    layoutMesas[colId].forEach(mesaNum => {
                        const mesaDiv = document.createElement('div');
                        const mesaData = mesas[mesaNum];
                        mesaDiv.classList.add('mesa', mesaData.status);
                        mesaDiv.textContent = mesaNum.toString().padStart(2, '0');
                        mesaDiv.dataset.numero = mesaNum;
                        
                        // Adiciona o atributo data-tooltip se a mesa estiver reservada ou vendida
                        if (mesaData.status !== 'livre' && mesaData.nome) {
                            mesaDiv.setAttribute('data-tooltip', `Responsável: ${mesaData.nome}`);
                        } else {
                            mesaDiv.removeAttribute('data-tooltip');
                        }

                        mesaDiv.addEventListener('click', () => {
                            abrirFormulario(mesaNum);
                        });
                        
                        coluna.appendChild(mesaDiv);
                    });
                }
            }

            function abrirFormulario(numero) {
                const mesa = mesas[numero];
                mesaNumeroInput.value = numero;
                nomeCompletoInput.value = mesa.nome;
                statusMesaSelect.value = mesa.status;
                senhaSupervisorInput.value = '';
                mensagemErro.style.display = 'none';
                cadastroForm.classList.remove('alerta-erro');
                cadastroForm.style.display = 'flex';
            }

            salvarBtn.addEventListener('click', () => {
                if (senhaSupervisorInput.value === senhaCorreta) {
                    const numeroMesa = parseInt(mesaNumeroInput.value);
                    const novoNome = nomeCompletoInput.value;
                    const novoStatus = statusMesaSelect.value;
                    
                    mesas[numeroMesa].nome = novoNome;
                    mesas[numeroMesa].status = novoStatus;
                    
                    salvarEstadoMesas(); // Salva o estado atualizado no localStorage
                    
                    cadastroForm.style.display = 'none';
                    renderizarMesas();
                } else {
                    mensagemErro.style.display = 'block';
                    cadastroForm.classList.add('alerta-erro');
                }
            });

            cancelarBtn.addEventListener('click', () => {
                cadastroForm.style.display = 'none';
            });

            // Carrega o estado das mesas ao iniciar a página e depois renderiza
            carregarEstadoMesas();
            renderizarMesas();
        });
    </script>
</body>
</html>